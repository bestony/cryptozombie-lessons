---
title: åœ¨ Loom ä¸Šæµ‹è¯•
actions: ["checkAnswer", "hints"]
material:
  editor:
    language: javascript
    startingCode:
      "truffle.js": |
        const HDWalletProvider = require("truffle-hdwallet-provider");
        const LoomTruffleProvider = require('loom-truffle-provider');
        const mnemonic = "YOUR MNEMONIC HERE";
        module.exports = {
            // Object with configuration for each network
            networks: {
                //development
                development: {
                    host: "127.0.0.1",
                    port: 7545,
                    network_id: "*",
                    gas: 9500000
                },
                // Configuration for mainnet
                mainnet: {
                    provider: function() {
                        return new HDWalletProvider(mnemonic, "https://mainnet.infura.io/")
                    },
                    network_id: "1" // Match any network id
                },
                // Configuration for rinkeby network
                rinkeby: {
                    provider: function() {
                        // Setting the provider with the Infura Rinkeby address and Token
                        return new HDWalletProvider(mnemonic, "https://rinkeby.infura.io/v3/e60cea1cd16e4a0bb524359bf83a8c01")
                    },
                    network_id: 4
                },
                // Configuration for Loom
                loom_dapp_chain: {
                    provider: function() {
                        const privateKey = 'YOUR_PRIVATE_KEY';
                        const chainId = 'extdev-plasma-us1';
                        const writeUrl = 'http://extdev-plasma-us1.dappchains.com:80/rpc';
                        const readUrl = 'http://extdev-plasma-us1.dappchains.com:80/query';
                        // TODO: Replace the line below
                        return new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey);
                    },
                    network_id: '9545242630824'
                }
            },
            compilers: {
                solc: {
                    version: "0.4.25"
                }
            }
        };

    answer: |
      const HDWalletProvider = require("truffle-hdwallet-provider");
      const LoomTruffleProvider = require('loom-truffle-provider');
      const mnemonic = "YOUR MNEMONIC HERE";
      module.exports = {
          // Object with configuration for each network
          networks: {
              //development
              development: {
                  host: "127.0.0.1",
                  port: 7545,
                  network_id: "*",
                  gas: 9500000
              },
              // Configuration for mainnet
              mainnet: {
                  provider: function() {
                      return new HDWalletProvider(mnemonic, "https://mainnet.infura.io/")
                  },
                  network_id: "1"
              },
              // Configuration for rinkeby network
              rinkeby: {
                  provider: function() {
                      return new HDWalletProvider(mnemonic, "https://rinkeby.infura.io/v3/e60cea1cd16e4a0bb524359bf83a8c01")
                  },
                  network_id: 4
              },
              // Configuration for Loom
              loom_dapp_chain: {
                  provider: function() {
                      const privateKey = 'YOUR_PRIVATE_KEY';
                      const chainId = 'extdev-plasma-us1';
                      const writeUrl = 'http://extdev-plasma-us1.dappchains.com:80/rpc';
                      const readUrl = 'http://extdev-plasma-us1.dappchains.com:80/query';
                      const loomTruffleProvider = new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey);
                      loomTruffleProvider.createExtraAccountsFromMnemonic(mnemonic, 10);
                      return loomTruffleProvider;
                  },
                  network_id: '9545242630824'
              }
          },
          compilers: {
              solc: {
                  version: "0.4.25"
              }
          }
      };
---

å‰å®³ï¼ä½ è‚¯å®šæœ‰å¥½å¥½ç»ƒä¹ ã€‚

ç°åœ¨ï¼Œå¦‚æœä¸å‘ä½ å±•ç¤ºå¦‚ä½•åœ¨ **_Loom_** æµ‹è¯•ç½‘ä¸Šè¿›è¡Œæµ‹è¯•ï¼Œæœ¬æ•™ç¨‹å°±ä¸å®Œæ•´å•¦ã€‚

å›æƒ³ä¸€ä¸‹æˆ‘ä»¬ä¹‹å‰çš„è¯¾ç¨‹ï¼Œåœ¨ **_Loom_** ä¸Šï¼Œç”¨æˆ·å¯ä»¥æ¯”åœ¨**ä»¥å¤ªåŠ**ä¸Šæœ‰æ›´å¿«ã€æ›´ä¸”æ—
gas çš„äº‹åŠ¡ã€‚è¿™ä½¿å¾— DAppChain æ›´é€‚åˆæ¸¸æˆæˆ–é¢å‘ç”¨æˆ·çš„ DAppã€‚

è€Œä¸”ï¼Œä½ çŸ¥é“å—ï¼Ÿåœ¨ **Loom** ä¸Šéƒ¨ç½²å’Œæµ‹è¯•æ²¡æœ‰ä»»ä½•ä¸åŒã€‚æˆ‘ä»¬å·²ç»ä¸ºä½ æ€»ç»“äº†åœ¨
**_Loom_** ä¸Šæµ‹è¯•æ‰€éœ€è¦åšçš„ï¼Œå¿«æ¥çœ‹ä¸‹å§ã€‚

## ä¸ºåœ¨ **Loom** ä¸Šæµ‹è¯•é…ç½® Truffle

å…ˆä»æœ€é‡è¦çš„å¼€å§‹ã€‚é€šè¿‡å°†ä»¥ä¸‹ä»£ç æ®µæ”¾ç½®åˆ° `networks` å¯¹è±¡ä¸­ï¼Œæ¥å‘Šè¯‰ Truffle å¦‚ä½•
éƒ¨ç½²åˆ° Loom æµ‹è¯•ç½‘ã€‚

```javascript
    loom_dapp_chain: {
      provider: function() {
          const privateKey = 'YOUR_PRIVATE_KEY';
          const chainId = 'extdev-plasma-us1';
          const writeUrl = 'http://extdev-plasma-us1.dappchains.com:80/rpc';
          const readUrl = 'http://extdev-plasma-us1.dappchains.com:80/query';
          return new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey);
      },
      network_id: 'extdev'
    }
```

> æ³¨æ„ï¼šæ°¸è¿œä¸è¦æ³„éœ²ä½ çš„ç§é’¥ï¼æˆ‘ä»¬è¿™æ ·åšåªæ˜¯ä¸ºäº†ç®€å•èµ·è§ã€‚æ›´å®‰å…¨çš„åŠæ³•æ˜¯å°†ä½ çš„ç§
> é’¥ä¿å­˜åˆ°æ–‡ä»¶ä¸­ï¼Œå¹¶ä»è¯¥æ–‡ä»¶ä¸­è¯»å–å…¶å€¼ã€‚å¦‚æœè¿™æ ·åšï¼Œè¯·ç¡®ä¿ä¸è¦å°†ä¿å­˜ç§é’¥çš„æ–‡ä»¶æ”¾
> åˆ° GitHub ä¸Šï¼Œå› ä¸ºé‚£æ ·ä»»ä½•äººéƒ½èƒ½çœ‹åˆ°å®ƒã€‚

## è´¦æˆ·æ•°ç»„

ä¸ºäº†ä½¿ _Truffle_ ä¸ **Loom** â€œå¯¹è¯â€ï¼Œæˆ‘ä»¬å·²ç»ç”¨æˆ‘ä»¬è‡ªå·±çš„
<a href="https://github.com/loomnetwork/loom-truffle-provider" target=_blank>Truffle
Provider</a> å–ä»£äº†é»˜è®¤çš„ `HDWalletProvider`ã€‚å› æ­¤ï¼Œæˆ‘ä»¬å¿…é¡»å‘Šè¯‰æˆ‘ä»¬çš„ provider
å¡«å†™`å¸æˆ·`æ•°ç»„ï¼Œè¿™æ ·æˆ‘ä»¬æ‰èƒ½æµ‹è¯•æˆ‘ä»¬çš„æ¸¸æˆã€‚ä¸ºæ­¤ï¼Œæˆ‘ä»¬éœ€è¦æ›¿æ¢`è¿”å›`æ–°
`LoomTruffleProvider` çš„ä»£ç è¡Œ:

```javascript
return new LoomTruffleProvider(chainId, writeUrl, readUrl, privateKey);
```

ç”¨è¿™ä¸ªæ›¿æ¢ï¼š

```javascript
const loomTruffleProvider = new LoomTruffleProvider(
  chainId,
  writeUrl,
  readUrl,
  privateKey
);
loomTruffleProvider.createExtraAccountsFromMnemonic(mnemonic, 10);
return loomTruffleProvider;
```

# å®æˆ˜æ¼”ä¹

1.  ç”¨ä¸Šé¢çš„ä»£ç ç‰‡æ®µæ›¿æ¢`è¿”å›`æ–° `LoomTruffleProvider` çš„ä»£ç è¡Œã€‚

è¿˜æœ‰ä¸€ä»¶äº‹æˆ‘ä»¬è¦æ³¨æ„ã€‚æ—¶é—´æ—…è¡Œåªåœ¨é’ˆå¯¹ _Ganache_ è¿›è¡Œæµ‹è¯•æ—¶å¯ç”¨ï¼Œå› æ­¤æˆ‘ä»¬åº”è¯¥è·³
è¿‡è¿™ä¸ªæµ‹è¯•ã€‚ä½ å·²ç»çŸ¥é“å¦‚ä½•é€šè¿‡åœ¨å‡½æ•°åå‰é¢æ”¾ç½® `x` æ¥ _è·³è¿‡_ æµ‹è¯•äº†ã€‚ä½†æ˜¯ï¼Œè¿™æ¬¡
æˆ‘ä»¬æƒ³è®©ä½ å†å­¦ç‚¹æ–°ä¸œè¥¿ã€‚é•¿è¯çŸ­è¯´â€¦â€¦ ä½ å¯ä»¥é€šè¿‡é“¾æ¥ä¸€ä¸ª `skip()` å‡½æ•°è°ƒç”¨æ¥ _è·³è¿‡_
æµ‹è¯•ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```javascript
it.skip("zombies should be able to attack another zombie", async () => {
  //We're skipping the body of the function for brevity
});
```

æˆ‘ä»¬å·²ç»ä¸ºä½ è·³è¿‡äº†æµ‹è¯•ï¼Œå¹¶è¿è¡Œäº† `truffle test --network loom_dapp_chain`ã€‚

å¦‚æœä½ ä»ä¸Šé¢è¾“å…¥å‘½ä»¤ï¼Œè¾“å‡ºä¼šæ˜¯è¿™æ ·:

```bash
Contract: CryptoZombies
    âœ“ should be able to create a new zombie (6153ms)
    âœ“ should not allow two zombies (12895ms)
    âœ“ should return the correct owner (6962ms)
    - zombies should be able to attack another zombie
    with the single-step transfer scenario
      âœ“ should transfer a zombie (13810ms)
    with the two-step transfer scenario
      âœ“ should approve and then transfer a zombie when the approved address calls transferForm (22388ms)


  5 passing (2m)
  1 pending
```

å„ä½ï¼Œå°±åˆ°è¿™é‡Œäº†ï¼æˆ‘ä»¬å·²ç»å®Œæˆäº† `CryptoZombies` æ™ºèƒ½åˆçº¦çš„æµ‹è¯•ã€‚
